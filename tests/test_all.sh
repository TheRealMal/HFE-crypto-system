#!/bin/bash
# Комплексный тест всех версий HFE

echo "=========================================="
echo "Комплексный тест всех версий HFE"
echo "=========================================="

cd "$(dirname "$0")/.." || exit 1

# Проверка наличия Python
if ! command -v python3 &> /dev/null; then
    echo "ОШИБКА: python3 не найден"
    exit 1
fi

# Проверка наличия main.py
if [ ! -f "main.py" ]; then
    echo "ОШИБКА: main.py не найден"
    exit 1
fi

echo "Запуск всех версий с размером данных 16000 байт..."
echo ""

# Создание директории для логов, если её нет
mkdir -p logs

# Запуск всех режимов
python3 main.py --mode all --data-size 16000 --log-level INFO --log-file logs/test_all.log

if [ $? -eq 0 ]; then
    echo ""
    echo "=========================================="
    echo "✓ Все тесты пройдены успешно"
    echo "=========================================="
    exit 0
else
    echo ""
    echo "=========================================="
    echo "✗ Некоторые тесты провалены"
    echo "=========================================="
    exit 1
fi


# Тесты для HFE криптосистемы

Этот каталог содержит bash-скрипты для тестирования различных аспектов реализации HFE криптосистемы.

## Доступные тесты

### 1. `test_correctness.sh`
Проверяет корректность работы шифрования и расшифрования для базовой и CPU-параллельной версий.

**Использование:**
```bash
./tests/test_correctness.sh
```

**Что проверяется:**
- Корректность шифрования/расшифрования различных типов данных
- Работа с пустыми данными
- Работа с большими объемами данных
- Соответствие исходных и расшифрованных данных

### 2. `test_base.sh`
Тестирует базовую версию HFE (без распараллеливания).

**Использование:**
```bash
./tests/test_base.sh
```

**Параметры:**
- Размер данных: 512 байт
- Уровень логирования: INFO

### 3. `test_cpu.sh`
Тестирует CPU-параллельную версию HFE.

**Использование:**
```bash
./tests/test_cpu.sh
```

**Параметры:**
- Размер данных: 2048 байт
- Количество процессов: 4
- Уровень логирования: INFO

### 4. `test_gpu.sh`
Тестирует GPU-параллельную версию HFE (если CUDA доступен).

**Использование:**
```bash
./tests/test_gpu.sh
```

**Параметры:**
- Размер данных: 4096 байт
- Уровень логирования: INFO

**Примечание:** Если CUDA недоступен, тест будет пропущен с предупреждением.

### 5. `test_all.sh`
Комплексный тест всех версий HFE с сравнением производительности.

**Использование:**
```bash
./tests/test_all.sh
```

**Параметры:**
- Размер данных: 1024 байт
- Режим: все версии (base, cpu, gpu)
- Логи сохраняются в `logs/test_all.log`

### 6. `test_performance.sh`
Тест производительности всех версий с разными размерами данных.

**Использование:**
```bash
./tests/test_performance.sh
```

**Что делает:**
- Тестирует с размерами данных: 512, 1024, 2048, 4096, 8192 байт
- Сохраняет результаты в `logs/performance_results.txt`
- Позволяет сравнить производительность разных версий

### 7. `run_all_tests.sh`
Запускает все тесты последовательно и выводит итоговую статистику.

**Использование:**
```bash
./tests/run_all_tests.sh
```

**Что делает:**
- Запускает все доступные тесты
- Выводит цветную статистику (зеленый = пройден, красный = провален, желтый = пропущен)
- Возвращает код выхода 0 при успехе, 1 при наличии провалов

## Быстрый старт

### Запуск всех тестов:
```bash
cd /path/to/hw
./tests/run_all_tests.sh
```

### Запуск конкретного теста:
```bash
./tests/test_correctness.sh
./tests/test_base.sh
./tests/test_cpu.sh
./tests/test_gpu.sh
./tests/test_all.sh
./tests/test_performance.sh
```

## Требования

- Bash 3.0+
- Python 3.7+
- Установленные зависимости из `requirements.txt`

Для GPU-тестов дополнительно требуется:
- NVIDIA GPU с поддержкой CUDA
- Установленный Numba с поддержкой CUDA

## Структура выходных данных

Тесты создают следующие файлы (если применимо):

- `logs/test_all.log` - логи комплексного теста
- `logs/performance_results.log` - результаты тестирования производительности

## Примеры вывода

### Успешный тест:
```
==========================================
Тест базовой версии HFE
==========================================
Запуск базовой версии с размером данных 512 байт...
...

✓ Тест базовой версии пройден успешно
```

### Проваленный тест:
```
==========================================
Тест базовой версии HFE
==========================================
...

✗ Тест базовой версии провален
```

### Пропущенный тест (GPU):
```
==========================================
Тест GPU-параллельной версии HFE
==========================================
Проверка доступности CUDA...
ПРЕДУПРЕЖДЕНИЕ: CUDA недоступен, тест будет пропущен
```

## Устранение неполадок

### Тесты не запускаются
- Убедитесь, что скрипты имеют права на выполнение: `chmod +x tests/*.sh`
- Проверьте, что вы находитесь в корневой директории проекта

### Ошибки импорта
- Убедитесь, что установлены все зависимости: `pip install -r requirements.txt`
- Проверьте, что Python может найти модули из `src/`

### GPU тесты не работают
- Это нормально, если CUDA недоступен
- Для использования GPU установите: `pip install numba`
- Убедитесь, что у вас есть NVIDIA GPU с поддержкой CUDA

## Интеграция с CI/CD

Тесты можно использовать в системах непрерывной интеграции:

```yaml
# Пример для GitHub Actions
- name: Run tests
  run: |
    chmod +x tests/*.sh
    ./tests/run_all_tests.sh
```


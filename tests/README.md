# Тесты для HFE криптосистемы

Этот каталог содержит Python-скрипты для тестирования различных аспектов реализации HFE криптосистемы.

## Доступные тесты

### 1. `test_correctness.py`
Проверяет корректность работы шифрования и расшифрования для всех версий (базовая, CPU-параллельная, GPU-параллельная).

**Использование:**
```bash
python3 tests/test_correctness.py
# или
./tests/test_correctness.py
```

**Что проверяется:**
- Корректность шифрования/расшифрования различных типов данных
- Работа с пустыми данными
- Работа с большими объемами данных
- Соответствие исходных и расшифрованных данных
- Тестирование всех доступных версий (base, CPU, GPU)

### 2. `test_base.py`
Тестирует базовую версию HFE (без распараллеливания).

**Использование:**
```bash
python3 tests/test_base.py
# или
./tests/test_base.py
```

**Параметры:**
- Размер данных: 2048 байт
- Уровень логирования: INFO

### 3. `test_cpu.py`
Тестирует CPU-параллельную версию HFE.

**Использование:**
```bash
python3 tests/test_cpu.py
# или
./tests/test_cpu.py
```

**Параметры:**
- Размер данных: 2048 байт
- Количество процессов: 4
- Уровень логирования: INFO

### 4. `test_gpu.py`
Тестирует GPU-параллельную версию HFE (если CUDA доступен).

**Использование:**
```bash
python3 tests/test_gpu.py
# или
./tests/test_gpu.py
```

**Параметры:**
- Размер данных: 65536 байт
- Уровень логирования: INFO

**Примечание:** Если CUDA недоступен, тест будет пропущен с предупреждением.

### 5. `test_all.py`
Комплексный тест всех версий HFE с сравнением производительности.

**Использование:**
```bash
python3 tests/test_all.py
# или
./tests/test_all.py
```

**Параметры:**
- Размер данных: 16000 байт
- Режим: все версии (base, cpu, gpu)
- Логи сохраняются в `logs/test_all.log`

### 6. `test_performance.py`
Тест производительности всех версий с разными размерами данных.

**Использование:**
```bash
python3 tests/test_performance.py
# или
./tests/test_performance.py
```

**Что делает:**
- Тестирует с размерами данных: 256, 512, 1024, 2048, 4096, 8192, 16384, 32768, 65536, 131072 байт
- Сохраняет результаты в `logs/performance_results.log`
- Позволяет сравнить производительность разных версий

### 7. `run_all_tests.py`
Запускает все тесты последовательно и выводит итоговую статистику.

**Использование:**
```bash
python3 tests/run_all_tests.py
# или
./tests/run_all_tests.py
```

**Что делает:**
- Запускает все доступные тесты
- Выводит цветную статистику (зеленый = пройден, красный = провален, желтый = пропущен)
- Возвращает код выхода 0 при успехе, 1 при наличии провалов

## Структура выходных данных

Тесты создают следующие файлы (если применимо):

- `logs/test_all.log` - логи комплексного теста
- `logs/performance_results.log` - результаты тестирования производительности

## Примеры вывода

### Успешный тест:
```
==================================================
Тест базовой версии HFE
==================================================
Запуск базовой версии с размером данных 2048 байт...
...

✓ Тест базовой версии пройден успешно
```

### Проваленный тест:
```
==================================================
Тест базовой версии HFE
==================================================
...

✗ Тест базовой версии провален
```

### Пропущенный тест (GPU):
```
==================================================
Тест GPU-параллельной версии HFE
==================================================
Проверка доступности CUDA...
ПРЕДУПРЕЖДЕНИЕ: CUDA недоступен, тест будет пропущен
Для использования GPU-версии установите PyTorch с поддержкой CUDA
```

## Устранение неполадок

### Тесты не запускаются
- Проверьте, что вы находитесь в корневой директории проекта
- Убедитесь, что используется правильная версия Python: `python3 --version`
- Убедитесь, что скрипты имеют права на выполнение (опционально): `chmod +x tests/*.py`

### Ошибки импорта
- Убедитесь, что установлены все зависимости: `pip install -r requirements.txt`
- Проверьте, что Python может найти модули из `src/`
- Убедитесь, что вы запускаете тесты из корневой директории проекта
